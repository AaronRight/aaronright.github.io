<div [ngClass]="play ? 'play' : ''" (click)="perform()">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10">
        <ng-container *ngIf="ios; else elseBlock">
            <!-- 
                for some reason ios allow play second controlled animation only once
                so I have to split animations and set timeout for hiding element redraw 
            -->
            <path class="ios" *ngIf="play; else elseIosBlock" d="M 3.2723216,2 6.7276787,2 C 7.4325448,2 8,2.5674553 8,3.2723213 
            L 8, 6.7276787 C 8,7.4325447 7.4325448,8 6.7276787,8 L 3.2723216, 8 C 2.5674556,8 2,7.4325447 2,6.7276787 
            L 2, 3.2723213 C 2,2.5674553 2.5674556,2 3.2723216,2 Z">
                <animate id="animation" begin="indefined" fill="freeze" attributeName="d" dur="1s" values="
            M 3.2723216,2 6.7276787,2 C 7.4325448,2 8,2.5674553 8,3.2723213 
            L 8, 6.7276787 C 8,7.4325447 7.4325448,8 6.7276787,8 L 3.2723216, 8 C 2.5674556,8 2,7.4325447 2,6.7276787 
            L 2, 3.2723213 C 2,2.5674553 2.5674556,2 3.2723216,2 Z;

            M 3.6258562,2.3535346 5.0002355,3.7274432 C 5.4987364,4.2257735 5.7742266,4.5012636 6.2725568,4.9997645 
            L 7.6464652,6.3741439 C 8.1447953,6.8726449 7.4325448,8 6.7276787,8 L 3.2723216, 8 C 2.5674556,8 2,7.4325447 2,6.7276787 L 2,3.2723213 
            C 2,2.5674553 3.1273554,1.8552044 3.6258562,2.3535346 Z
            " />
                <animateTransform attributeName="transform" fill="freeze" begin="animation.begin" dur="1s"
                    type="rotate" from="90 5 5" to="225 5 5" repeatCount="1" />
                <animateTransform attributeName="transform" fill="freeze" begin="animation.begin" dur="1s"
                    type="translate" values="0,0; 1,-1" repeatCount="1" additive="sum" />
            </path>
            <ng-template #elseIosBlock>
                <g class="ios rotate">
                    <path d="M 3.6258562,2.3535346 5.0002355,3.7274432 C 5.4987364,4.2257735 5.7742266,4.5012636 6.2725568,4.9997645 
                    L 7.6464652,6.3741439 C 8.1447953,6.8726449 7.4325448,8 6.7276787,8 L 3.2723216, 8 C 2.5674556,8 2,7.4325447 2,6.7276787 L 2,3.2723213 
                    C 2,2.5674553 3.1273554,1.8552044 3.6258562,2.3535346 Z">
                        <animate id="animation" begin="indefined" fill="freeze" attributeName="d" dur="1s" values="
                        M 3.6258562,2.3535346 5.0002355,3.7274432 C 5.4987364,4.2257735 5.7742266,4.5012636 6.2725568,4.9997645 
                            L 7.6464652,6.3741439 C 8.1447953,6.8726449 7.4325448,8 6.7276787,8 L 3.2723216, 8 C 2.5674556,8 2,7.4325447 2,6.7276787 L 2,3.2723213 
                            C 2,2.5674553 3.1273554,1.8552044 3.6258562,2.3535346 Z;
            
                            M 3.2723216,2 6.7276787,2 C 7.4325448,2 8,2.5674553 8,3.2723213 
                            L 8, 6.7276787 C 8,7.4325447 7.4325448,8 6.7276787,8 L 3.2723216, 8 C 2.5674556,8 2,7.4325447 2,6.7276787 
                            L 2, 3.2723213 C 2,2.5674553 2.5674556,2 3.2723216,2 Z
                        " />
                        <animateTransform attributeName="transform" fill="freeze" begin="animation.begin" dur="1s"
                            type="rotate" from="0 5 5" to="-135 5 5" repeatCount="1" />
                        <animateTransform attributeName="transform" fill="freeze" begin="animation.begin" dur="1s"
                            type="translate" values="0,0; 0,-1.4" repeatCount="1" additive="sum" />
                    </path>
                </g>
            </ng-template>
        </ng-container>

        <ng-template #elseBlock>
            <path class="common"></path>
        </ng-template>
    </svg>
</div>