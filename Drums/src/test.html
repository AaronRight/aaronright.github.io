<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vuex/3.0.1/vuex.js"></script>
</head>
<body>
<div id=app>
    <div v-for='note in notes'>
        {{ note.text }}
    </div>
    <button @click='addNew'>Add note</button>
    <note0></note0>
    <note1></note1>
</div>

<script>
Vue.component('note0', {
    computed: {
        note01() {
            return this.$store.getters.notes[1]
        }
    },
    template: '<button>note0 - {{ note01 }} </button>'
});

Vue.component('note1', {
    methods: {
        note02( n ) {
            return this.$store.getters.notes[n]
        }
    },
    template: '<button>note1 - {{ note02( 5 ) }}</button>'
});

const store = new Vuex.Store({
    state: {
    notes: []
    },
    actions: {
        addNote({commit}, note) {
            commit('ADD_NOTE', note)
        }
    },
    mutations: {
        ADD_NOTE(state, note) {
            state.notes.push(note)
        }
    },
    getters: {
        notes(state) {
            return state.notes
        }
    }
})

new Vue({
    el: '#app',
    store,
    computed: {
        notes() {
            return this.$store.getters.notes;
        }
    },
    methods: {
        addNew() {
            this.$store.dispatch('addNote', { text: 'New Note' + Math.floor(Math.random()*100) })
        }
    }
})
</script>
</body>
</html>